{% extends 'base.html' %}

{% block title %}
Contact Book - {{ block.super }}
{% endblock %}

{% block content %}
{% if messages %}
{% for message in messages %}

{% if message.tags == 'error'%}
<div class="alert alert-danger" role="alert">{{message}}</div>
{% else %}
<div class="alert alert-{{ message.tags }}" role="alert">{{message}}</div>
{% endif %}
{% endfor %}
{% endif %}

<div class="navbar bg-light">
    <form class="container-fluid" action="{% url 'search_contact' %}" method="get">
        <div class="input-group">
            <span class="input-group-text" id="basic-addon1">SEARCH</span>
            <input class="form-control" type="text" name="s" placeholder="username, phone, email">
            <input type="submit" hidden>
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <button class="btn btn-secondary" type="submit" data-bs-toggle="button"><i class="fa fa-bars"></i>
                </button>
            </div>
        </div>
    </form>
</div>

<div data-bs-spy="scroll" style="overflow: scroll;height: 550px" data-bs-root-margin="0px 0px -10%"
     data-bs-smooth-scroll="true" class="scrollspy-example bg-light p-3 rounded-2" tabindex="1">
    <div class="list-group">
        {% if contacts_data %}
        {% for contact in contacts_data %}
        <a href="{{ contact.get_absolute_url }}" class="list-group-item list-group-item-action"
           onmouseover="active(this)" onmouseout="normal(this)">
            <div class="d-flex w-100 justify-content-between">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckIndeterminate">
                    <h5 class="mb-1">{{contact.name}}</h5>
                    <small>Days to birthday: {{contact.days_to_birthday}}</small>
                </div>
                <small>{{contact.birthday|timesince}}</small>
            </div>
        </a>
        {% endfor %}
    </div>
</div>

<div class="d-grid d-md-flex justify-content-md-end mb-2">
    <button type="submit" class="btn btn-danger btn-block mt-3" disabled><i class="fa fa-trash"></i> DELETE</button>
</div>


{% else %}
<img src="https://cdn.dribbble.com/users/415089/screenshots/14359077/media/12e60e1d4f5556b56310908bc9e6c2ea.jpg?compress=1&resize=768x576&vertical=top"
     height="85%" width="85%" class="rounded mx-auto d-block" alt="not-search-result">
{% endif %}

<script>
function normal(x) {
  x.className = 'list-group-item list-group-item-action';
}

function active(x) {
  x.className = 'list-group-item list-group-item-action active';
}
</script>
{% endblock %}